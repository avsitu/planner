(window.webpackJsonpplanner=window.webpackJsonpplanner||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),c=(a(15),a(9)),l=a(2),o=a(3),u=a(6),d=a(4),m=a(1),h=a(5),p=["9AM","10AM","11AM","12PM","1PM","2PM","3PM","4PM","5PM","6PM","7PM","8PM","9PM"],v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleBoxClick=a.handleBoxClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleBoxClick",value:function(e){var t=e.target;t.classList.contains("true")?(t.classList.remove("true"),t.classList.add("false")):(t.classList.remove("false"),t.classList.add("true"))}},{key:"render",value:function(){var e=this.props.data.includes(this.props.id);return r.a.createElement("div",{className:"box-container"},r.a.createElement("span",{className:e?"checkmark true":"checkmark false",id:this.props.id,onClick:"Everyone"!==this.props.name?this.handleBoxClick:function(){return!1},"aria-hidden":"true"}))}}]),t}(n.Component);function b(e){return r.a.createElement("td",{id:"box-"+e.id},r.a.createElement(v,{id:e.id,data:e.data,name:e.name}))}function f(e){var t=e.hour,a=e.dates.map(function(a){return r.a.createElement(b,{key:e.name+"-"+a+"-"+t,id:a+"-"+t,data:e.data,name:e.name})});return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},t),a)}function y(e){for(var t=[],a=0;a<p.length;a++)t.push(r.a.createElement(f,{key:"hour-"+p[a],hour:p[a],data:e.data,name:e.name,dates:e.dates}));return r.a.createElement("tbody",null,t)}function E(e){var t=["Hour"].concat(e.dates).map(function(e){return r.a.createElement("th",{scope:"col",key:e},e)});return r.a.createElement("thead",null,r.a.createElement("tr",null,t))}var w=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("table",{className:"table"},r.a.createElement(E,{dates:this.props.dates}),r.a.createElement(y,{name:this.props.name,data:this.props.data,dates:this.props.dates}))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"currentSelection",value:function(){var e=document.querySelectorAll(".checkmark"),t=[];return e.forEach(function(e){e.classList.contains("true")&&t.push(e.id)}),t}},{key:"handleSubmit",value:function(e){this.props.onSubmit(this.currentSelection())}},{key:"render",value:function(){return r.a.createElement("div",null,"Everyone"===this.props.name&&r.a.createElement("button",{disabled:!0,className:"b-submit btn btn-primary"},"(You May Not Edit This Selection.) "),"Everyone"!==this.props.name&&r.a.createElement("button",{onClick:this.handleSubmit,className:"b-submit btn btn-primary"},"Submit Changes for ",r.a.createElement("b",null,this.props.name)))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleNewEvent=a.handleNewEvent.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleNewEvent",value:function(e){this.props.onFormSubmit(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#fcollapse","aria-expanded":"false","aria-controls":"collapseExample"},"Add New Event")),r.a.createElement("div",{className:"collapse",id:"fcollapse"},r.a.createElement("div",{className:"card card-body"},r.a.createElement("form",{className:"form-inline dates-form",onSubmit:this.handleNewEvent,id:"newForm"},r.a.createElement("label",{htmlFor:"date1",hidden:!0}),r.a.createElement("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Event name"}),r.a.createElement("label",null,"Select Dates:"),r.a.createElement("input",{type:"date",className:"form-control mb-2 mr-sm-2"}),r.a.createElement("input",{type:"date",className:"form-control mb-2 mr-sm-2"}),r.a.createElement("input",{type:"date",className:"form-control mb-2 mr-sm-2"}),r.a.createElement("input",{type:"date",className:"form-control mb-2 mr-sm-2"}),r.a.createElement("input",{type:"date",className:"form-control mb-2 mr-sm-2"}),r.a.createElement("button",{className:"btn btn-primary mb-2",type:"submit"},"Add")),r.a.createElement("p",{id:"invalid-err",className:"hide"},"Please enter dates in valid format."),r.a.createElement("p",{id:"empty-err",className:"hide"},"Please enter at least 1 valid date."))))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={newName:""},a.handleNameSwitch=a.handleNameSwitch.bind(Object(m.a)(a)),a.handleKeyInput=a.handleKeyInput.bind(Object(m.a)(a)),a.handleNewUser=a.handleNewUser.bind(Object(m.a)(a)),a.handlePageSwitch=a.handlePageSwitch.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleNameSwitch",value:function(e){this.props.onNameSwitch(e)}},{key:"handlePageSwitch",value:function(e){this.props.onPageSwitch(e)}},{key:"handleKeyInput",value:function(e){e.target.value.includes(" ")?e.target.value=this.state.newName:this.setState({newName:e.target.value.toLowerCase()})}},{key:"handleNewUser",value:function(e){e.preventDefault(),this.props.users.includes(this.state.newName)?alert("The name already exists: "+this.state.newName):"everyone"===this.state.newName||""===this.state.newName?alert("That name is invalid."):(this.props.onNewUser(this.state.newName),this.setState({newName:""}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("a",{className:"btn btn-primary",href:"/",onClick:this.handlePageSwitch},"\u21d0 Home")),r.a.createElement("form",{className:"form-inline",onSubmit:this.handleNewUser},r.a.createElement("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Add me...",onChange:this.handleKeyInput,value:this.state.newName}),r.a.createElement("button",{className:"btn btn-primary  mb-2",type:"submit"},"Add")),r.a.createElement(j,{onNameSwitch:this.handleNameSwitch,users:this.props.users,name:this.props.name}))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleNameSwitch=a.handleNameSwitch.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleNameSwitch",value:function(e){e.preventDefault();var t=e.target.dataset.name;this.props.onNameSwitch(t)}},{key:"render",value:function(){var e=this,t=this.props.users.map(function(t){return r.a.createElement("button",{className:"dropdown-item","data-name":t,onClick:e.handleNameSwitch,key:"user-"+t},t)});return t.splice(1,0,r.a.createElement("div",{key:"divider",className:"dropdown-divider"})),r.a.createElement("div",{className:"dropdown"},r.a.createElement("span",null,"Show Availability for: "),r.a.createElement("button",{id:"user-toggle",className:"btn btn-primary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.props.name),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},t))}}]),t}(n.Component),g=S;function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var P=["9AM","10AM","11AM","12PM","1PM","2PM","3PM","4PM","5PM","6PM","7PM","8PM","9PM"];function M(e,t,a){if(1==a)return[];var n=[];t.forEach(function(e){P.forEach(function(t){n.push(e+"-"+t)})});var r=function(t){n=n.filter(function(a){return e[t].includes(a)})};for(var s in e)r(s);return n}var C=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e,a))).state={eventId:0,data:{},users:[],eventsList:[],name:"",path:"/"},n.handleNameSwitch=n.handleNameSwitch.bind(Object(m.a)(n)),n.handlePageSwitch=n.handlePageSwitch.bind(Object(m.a)(n)),n.handleNewEvent=n.handleNewEvent.bind(Object(m.a)(n)),n.handleEventUpdate=n.handleEventUpdate.bind(Object(m.a)(n)),n.handleNewUser=n.handleNewUser.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/events/get").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({eventsList:t})},function(e){console.log(e)})}},{key:"handleNameSwitch",value:function(e){this.setState({name:e})}},{key:"handlePageSwitch",value:function(e){var t=this;e.preventDefault();var a=e.target.getAttribute("href");if(a.includes("?event=")){var n=parseInt(a.substr(7)),r="/users/get?id="+this.state.eventsList[n].id;fetch(r).then(function(e){return e.json()}).then(function(e){t.setState({eventId:n,name:"Everyone",data:e,users:["Everyone"].concat(Object.keys(e)),path:a})},function(e){console.log(e)})}else this.setState({path:a})}},{key:"handleEventUpdate",value:function(e){this.setState(function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t.data);return a[t.name]=e,{data:a}});var t="/users/update?name=".concat(this.state.name,"&id=").concat(this.state.eventsList[this.state.eventId].id,"&dates=").concat(e.toString());fetch(t)}},{key:"handleNewUser",value:function(e){var t=this;this.setState(function(t){return{users:t.users.concat([e]),name:e}},function(){return t.handleEventUpdate([])});var a="/users/add?name=".concat(e,"&id=").concat(this.state.eventsList[this.state.eventId].id);fetch(a)}},{key:"validate",value:function(e){return!0}},{key:"handleNewEvent",value:function(e){var t=this;e.preventDefault(),document.querySelector("#invalid-err").classList.add("hide"),document.querySelector("#empty-err").classList.add("hide");var a=e.target.querySelector("input[type='text']").value,n=e.target.querySelectorAll("input[type='date']"),r=new Set;n.forEach(function(e){""!==e.value&&r.add(e.value.slice(5))});var s=Array.from(r);if(0===s.length)document.querySelector("#empty-err").classList.remove("hide");else{var i="/events/add?name=".concat(a,"&dates=").concat(s.toString());fetch(i).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState(function(t){return{eventsList:t.eventsList.concat([e])}})},function(e){console.log(e)})}}},{key:"render",value:function(){var e=this;if(this.state.path.includes("?event=")){var t=this.state.eventsList[this.state.eventId].dates;return r.a.createElement("div",null,r.a.createElement(g,{eventId:this.state.eventId,name:this.state.name,users:this.state.users,onNameSwitch:this.handleNameSwitch,onPageSwitch:this.handlePageSwitch,onNewUser:this.handleNewUser}),r.a.createElement(w,{dates:t,name:this.state.name,data:"Everyone"!==this.state.name?this.state.data[this.state.name]||[]:M(this.state.data,t,this.state.users.length)}),r.a.createElement(N,{name:this.state.name,eventId:this.state.eventId,onSubmit:this.handleEventUpdate}))}var a=this.state.eventsList.map(function(t,a){return r.a.createElement("li",{key:t.id},r.a.createElement("a",{href:"?event="+a,onClick:e.handlePageSwitch},t.name))});return r.a.createElement("div",null,r.a.createElement(O,{onFormSubmit:this.handleNewEvent}),r.a.createElement("ul",null,a))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.d46c9fff.chunk.js.map